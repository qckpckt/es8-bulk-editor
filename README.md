# Boss ES-8 Bulk Editor

## DISCLAIMER

This is a community-built resource and has absolutely no affiliation or association with Roland corp. Use of this tool to bulk edit your patches may result in a voided warranty, data loss, and even permanent damage to your ES- or MS- series device. You use this tool completely at your own risk.

The maintainers of this repository are in no way responsible for damage to your ES-8, ES-5, MS-3, or indeed any other product that you attempt to use this tool with.

**ALWAYS** back up your ES-8 patches before attempting a bulk edit.

# Overview

This tool is being developed in order to provide the ability to make edits globally to your ES-8 device that are not possible with the current version of the ES-8 editor. It is accomplished by parsing and modifying the patch backup file that can be generated by the ES-8 editor as opposed to interacting with the ES-8 unit directly.

## Requirements
- `python` >= 3.8.0

## Usage

Example - set Num8 to be tap tempo globally using assign 1

```shell
$ python -m bulk_editor --assign-number 1 --source Num8 --mode MOM --target 'BPM: Tap' --params: params.json
```

Example - set MemM to change value of CTl1 globally using assign 2, overwriting any previous global setting for assign 2

```shell
$ python -m bulk_editor --asign-number 2 --source MemM --mode TGL --target 'E CTL: CTL1' --params: params.json --force
```

## How it works

- Load in backup file (currently hard coded to `test_1.bel`)
- Load in global_defaults.json
- If the output file does not exist, set `initial` to be True. This will mean that the factory default will be used as the base mask for existing patches.
- Check if the assign specificed by the supplied assign number in the current global default differs from the same assign in the factory default
    - if it does, and the `--force` arg was not specified, raise an error (the user was about to overwrite a previously set global assign without realizing)
- Update the global default with the requested assign changes.
- For each patch in the input file (the current state), create a mask of that patch by comparing it to either the factory default config, or the previous global default config, depending on whether `initial` is True or False.
- Apply the global default (which inherently is a mask) to the factory default to create the base to apply the patch masks over.
- Iterate over the masks generated from the current state patches, applying each to the newly created base
- Inject the resulting patches back into the `["patch"]` element from the backup file
- Write the modified backup to the output file, write the updated global default to `global_defaults.json`.

## Features

### CURRENT:

#### Creating global assigns

It is common practice to assign a footswitch on the ES-8 to control tap tempo, and it makes sense that you use the same footswitch on every patch for ease of use. Currently, you would need to manually create this assign for every new patch you use, or copy settings over from an existing patch (more on this later). This tool will have an option to create and apply (or remove) an assign to all patches globally.

### FUTURE STATE

#### Swap loops globally

Lets say you buy a new pedal that has stereo outs, and want to put it in loop 7, but you have an existing pedal in that slot and a large number of existing patches that use this loop in various configurations. Your plan is to remove a pedal from another loop (let's say 6), and to move the pedal currently in loop 7 to loop 6. With the ES-8 editor, you would need to go through every patch you have that uses loop 7 and manually swap it with loop 6. This can be a painful, dull, slow process. This tool aims to automate this by allowing you to specify which loops you want to swap, and what logic to use in the process (straight swap, or swap and wipe for example).

#### Create a meta-patch

It is also common practice to create a base patch with commonly used assigns, loop placements, i/o settings etc to use as a template for other patches. This is easily achievable using the bulk copy commands in the ES-8 editor. But, what if you need to *change* this meta-patch? Currently there is no way to accomplish this without either manually editing all patches or creating a meta-patch and wiping everything else out.

The bulk editor will include a feature that will let you update all existing patches to match a new patch template.